# STVDB - SQL解析器与交互式命令行工具

## 项目概述
STVDB是一个我正在开发的项目，专注于实现一个功能完整的SQL解析器和交互式SQL命令行工具。本项目采用模块化设计，包含词法分析器、交互式输入处理器和实用工具函数，为构建完整的数据库系统打下基础。
我正在在学习SQL的过程中，突发奇想地想要构建一个属于自己的SQL，故有了此项目

## 已完成功能
- **SQL词法分析器**：能够识别标准SQL关键字、标识符、字符串、数字等基本语法单元，支持多词关键字如`GROUP BY`、`ORDER BY`等，并正确处理注释、字符串引号和特殊符号。
- **交互式命令行界面**：提供美观的命令行提示符和延续行提示，支持多行SQL语句输入（以分号结尾），处理各种引号、注释和转义字符。
- **实用工具函数**：包含字符串处理工具、命令行提示符格式化功能和字符宽度计算，确保中文等宽字符显示正常。
- **特殊命令支持**：识别并处理以特定符号（如`.`、`~`、`//`）开头的特殊命令。

## 待完成功能
- **SQL语法解析器**：将词法分析生成的Token序列转换为抽象语法树（AST）。
- **查询执行引擎**：实现SQL查询的执行逻辑，包括表扫描、过滤、排序、连接等操作。
- **数据库存储引擎**：设计并实现数据存储和管理机制，包括表结构定义、索引实现和事务处理。
- **SQL语义分析**：实现查询验证、类型检查和权限验证等功能。

## 项目结构
STVDB/
 └── Inspiration/ # 这个文件夹用来存放当前灵感，在后续重构过程中会删除
      ├── Lexer.py
      ├── ShellInput.py
      └── utils
            ├── __init__.py
            ├── const.py
            └── utils.py
## 技术实现细节
- **词法分析器**：使用正则表达式识别各种SQL语法元素，状态机设计处理复杂的语法规则。
- **交互式输入处理器**：使用状态机跟踪当前输入状态（引号、注释等），处理Ctrl+C中断和Ctrl+D结束输入。
- **工具函数**：提供命令行提示符格式化功能，计算字符宽度以确保提示对齐。

## 使用方法
1. **初始化词法分析器**
   ```python
   lexer = SQLLexer()
   ```

2. **获取交互式输入**
   ```python
   generator = _get_line(name='dbname>')
   for statement in generator:
       # 处理完整的SQL语句
       pass
   ```

3. **词法分析**
   ```python
   for token in lexer.tokenize(statement):
       print(token)  # 输出 (token_type, token_value)
   ```

## 贡献指南
欢迎对本项目感兴趣的开发者参与贡献。如果您发现了bug或有新的功能建议，请提交issue或pr。

## 许可证
本项目采用[MIT许可证](./LICENSE)。

## 鸣谢
感谢所有为这个项目提供建议和帮助的朋友们。
    
